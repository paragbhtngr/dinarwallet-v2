exports.contract = web3.eth.contract([{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"validate","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"actionName","type":"string"},{"name":"data","type":"bytes"}],"name":"execute","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"name","type":"string"},{"name":"action","type":"address"}],"name":"addAction","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"name","type":"string"}],"name":"removeAction","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"getUserPermission","outputs":[{"name":"","type":"int256"}],"type":"function"},{"constant":false,"inputs":[{"name":"perm","type":"int256"}],"name":"setUserPermission","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"getActionDataAddress","outputs":[{"name":"","type":"address"}],"type":"function"},{"inputs":[{"name":"actionManagerAddress","type":"address"}],"type":"constructor"}]
);

/*var data = '6060604052604051602080610cf383395060806040525160028054600160a060020a031990811683179182905560038054909116331790553090600160a060020a031660806106bb806100938339600160a060020a03939093169083015260a08201526040519081900360c001906000f060018054600160a060020a031916919091179055506105a58061074e6000396000f360606040818152806106bb833960a090525160805160028054600160a060020a031990811690931790556003805490921617905561067a806100416000396000f3606060405236156100565760e060020a60003504630ddcfe8e8114610058578063207c64fb14610076578063229320ca1461008757806338cc48311461011c57806354a380061461013857806362441aee1461018f575b005b6101e66004355b600254600160a060020a038281169116145b919050565b6101e660043560006101f83361005f565b6101e66004808035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843750506040805160208835808b0135601f8101839004830284018301909452838352979998604498929750919091019450909250829150840183828082843750949650505050505050600060006102373361005f565b6040805130600160a060020a0316815290519081900360200190f35b6101e66004808035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843750949650509335935050505060006104023361005f565b6101e66004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437509496505050505050506000600061056a3361005f565b60408051918252519081900360200190f35b1561022a57600160a060020a03821660009081526001602081905260409091205460ff16141561022f57506001610071565b610002565b506000610071565b1561022a57600060005084604051808280519060200190808383829060006004602084601f0104600f02600301f150905001915050908152602001604051809103902060009054906101000a9004600160a060020a0316905080600160a060020a0316600014156102ab57600091506103fb565b80600160a060020a03166305f474a86040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750505060405180519060200150600160a060020a031663ba061afa6040518160e060020a0281526004018090506020604051808303816000876161da5a03f115610002575050506040518051906020015081600160a060020a031663bddeab776040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750505060405180519060200150121561038857600091506103fb565b80600160a060020a031683604051808280519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156103e05780820380516001836020036101000a031916815260200191505b509150506000604051808303816000866161da5a03f1935050505b5092915050565b1561022a5781600060005084604051808280519060200190808383829060006004602084601f0104600f02600301f150905001915050908152602001604051809103902060006101000a815481600160a060020a030219169083021790555060016001600050600084600160a060020a0316815260200190815260200160002060006101000a81548160ff0219169083021790555081600160a060020a0316636b718db9600360009054906101000a9004600160a060020a03166040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f115610002575050604080516002547fc174dce3000000000000000000000000000000000000000000000000000000008252600160a060020a0390811660048301529151918516925063c174dce391602482810192602092919082900301816000876161da5a03f11561000257505060405151949350505050565b1561022a57600060005083604051808280519060200190808383829060006004602084601f0104600f02600301f150905001915050908152602001604051809103902060009054906101000a9004600160a060020a0316905080600160a060020a0316600014156105de5760009150610674565b6000600060005084604051808280519060200190808383829060006004602084601f0104600f02600301f150905001915050908152602001604051809103902060006101000a815481600160a060020a030219169083021790555060016001600050600083600160a060020a0316815260200190815260200160002060006101000a81548160ff02191690830217905550600191505b5091905056606060405236156100615760e060020a6000350463207c64fb8114610063578063229320ca146100d057806354a380061461029457806362441aee146103c2578063ba061afa146104d9578063ba0e4c30146104e3578063cd143d451461050d575b005b6105716004356001547f207c64fb000000000000000000000000000000000000000000000000000000006060908152600160a060020a03838116606452600092169063207c64fb9060849060209060248187876161da5a03f115610002575050604051519150505b919050565b608060206004803580820135601f8101849004909302840160405260608381526105719492936024939192840191819083828082843750506040805160208835808b0135601f8101839004830284018301909452838352979998604498929750919091019450909250829150840183828082843750949650505050505050600254600090600160a060020a039081163390911614156105a057600154604080517f229320ca0000000000000000000000000000000000000000000000000000000081526004818101928352865160448301528651600160a060020a03949094169363229320ca93889388939192839260248301926064019160809181908490829085908f906020601f850104600f02600301f150905090810190601f16801561020d5780820380516001836020036101000a031916815260200191505b508381038252848181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156102665780820380516001836020036101000a031916815260200191505b509450505050506020604051808303816000876161da5a03f115610002575050604051519150505b92915050565b608060206004803580820135601f81018490049093028401604052606083815261057194929360249391928401918190838280828437509496505093359350505050600354600090600160a060020a039081163390911614156105a057604080516001547f54a38006000000000000000000000000000000000000000000000000000000008252600160a060020a038581166024840152600483810194855287516044850152875192909116936354a38006938893889383926064019160809181908490829085908e906020601f850104600f02600301f150905090810190601f1680156103965780820380516001836020036101000a031916815260200191505b5093505050506020604051808303816000876161da5a03f11561000257505060405151915061028e9050565b608060206004803580820135601f8101849004909302840160405260608381526105719492936024939192840191819083828082843750949650505050505050600354600090600160a060020a039081163390911614156105a057600160009054906101000a9004600160a060020a0316600160a060020a03166362441aee836040518260e060020a02815260040180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156104ae5780820380516001836020036101000a031916815260200191505b50925050506020604051808303816000876161da5a03f1156100025750506040515191506100cb9050565b6105716000545b90565b61057160043560035460009033600160a060020a03908116911614156105a05781905560016100cb565b6105836001547f38cc4831000000000000000000000000000000000000000000000000000000006060908152600091600160a060020a0316906338cc48319060649060209060048187876161da5a03f1156100025750506040515191506104e09050565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b61000256';*/

var data = '606060405260405160208061148a833981016040528080519060200190919050505b80600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555033600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555030600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16604051610a1a80610134833901808373ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff16815260200192505050604051809103906000f0600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555060006000600050819055505b5061093c80610b4e6000396000f36060604052604051604080610a1a833981016040528080519060200190919080519060200190919050505b81600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555080600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b5050610989806100916000396000f360606040523615610074576000357c0100000000000000000000000000000000000000000000000000000000900480630ddcfe8e14610076578063207c64fb146100a4578063229320ca146100d257806338cc48311461018557806354a38006146101be57806362441aee1461023357610074565b005b61008c600480803590602001909190505061029f565b60405180821515815260200191505060405180910390f35b6100ba60048080359060200190919050506102fe565b60405180821515815260200191505060405180910390f35b61016d6004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091908035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091905050610375565b60405180821515815260200191505060405180910390f35b61019260048050506105f5565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61021b6004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091908035906020019091905050610602565b60405180821515815260200191505060405180910390f35b6102876004808035906020019082018035906020019191908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505090909190505061082a565b60405180821515815260200191505060405180910390f35b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161490506102f9565b919050565b60006103093361029f565b1561036a5760011515600160005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515141561035d5760019050610370565b600090506103705661036f565b610002565b5b919050565b600060006103823361029f565b156105e857600060005084604051808280519060200190808383829060006004602084601f0104600f02600301f150905001915050908152602001604051809103902060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905060008173ffffffffffffffffffffffffffffffffffffffff16141561041057600091506105ee565b8073ffffffffffffffffffffffffffffffffffffffff166305f474a8604051817c01000000000000000000000000000000000000000000000000000000000281526004018090506020604051808303816000876161da5a03f115610002575050506040518051906020015073ffffffffffffffffffffffffffffffffffffffff1663ba061afa604051817c01000000000000000000000000000000000000000000000000000000000281526004018090506020604051808303816000876161da5a03f11561000257505050604051805190602001508173ffffffffffffffffffffffffffffffffffffffff1663bddeab77604051817c01000000000000000000000000000000000000000000000000000000000281526004018090506020604051808303816000876161da5a03f1156100025750505060405180519060200150121561055f57600091506105ee565b8073ffffffffffffffffffffffffffffffffffffffff1683604051808280519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156105c45780820380516001836020036101000a031916815260200191505b509150506000604051808303816000866161da5a03f191505091506105ee566105ed565b610002565b5b5092915050565b60003090506105ff565b90565b600061060d3361029f565b1561081e5781600060005084604051808280519060200190808383829060006004602084601f0104600f02600301f150905001915050908152602001604051809103902060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055506001600160005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908302179055508173ffffffffffffffffffffffffffffffffffffffff16636b718db9600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16604051827c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1681526020019150506020604051808303816000876161da5a03f1156100025750505060405180519060200150508173ffffffffffffffffffffffffffffffffffffffff1663c174dce3600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16604051827c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1681526020019150506020604051808303816000876161da5a03f1156100025750505060405180519060200150905061082456610823565b610002565b5b92915050565b600060006108373361029f565b1561097d57600060005083604051808280519060200190808383829060006004602084601f0104600f02600301f150905001915050908152602001604051809103902060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905060008173ffffffffffffffffffffffffffffffffffffffff1614156108c55760009150610983565b6000600060005084604051808280519060200190808383829060006004602084601f0104600f02600301f150905001915050908152602001604051809103902060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055506001600160005060008373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908302179055506001915061098356610982565b610002565b5b50919050566060604052361561007f576000357c010000000000000000000000000000000000000000000000000000000090048063207c64fb14610081578063229320ca146100af57806354a380061461016257806362441aee146101d7578063ba061afa14610243578063ba0e4c3014610266578063cd143d45146102945761007f565b005b61009760048080359060200190919050506102cd565b60405180821515815260200191505060405180910390f35b61014a6004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091908035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091905050610386565b60405180821515815260200191505060405180910390f35b6101bf6004808035906020019082018035906020019191908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050909091908035906020019091905050610542565b60405180821515815260200191505060405180910390f35b61022b6004808035906020019082018035906020019191908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509090919050506106bc565b60405180821515815260200191505060405180910390f35b6102506004805050610817565b6040518082815260200191505060405180910390f35b61027c6004808035906020019091905050610829565b60405180821515815260200191505060405180910390f35b6102a160048050506108a3565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb83604051827c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1681526020019150506020604051808303816000876161da5a03f11561000257505050604051805190602001509050610381565b919050565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561053657600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663229320ca8484604051837c01000000000000000000000000000000000000000000000000000000000281526004018080602001806020018381038352858181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156104a75780820380516001836020036101000a031916815260200191505b508381038252848181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156105005780820380516001836020036101000a031916815260200191505b509450505050506020604051808303816000876161da5a03f1156100025750505060405180519060200150905061053c5661053b565b610002565b5b92915050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614156106b057600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166354a380068484604051837c010000000000000000000000000000000000000000000000000000000002815260040180806020018373ffffffffffffffffffffffffffffffffffffffff1681526020018281038252848181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f16801561067b5780820380516001836020036101000a031916815260200191505b5093505050506020604051808303816000876161da5a03f115610002575050506040518051906020015090506106b6566106b5565b610002565b5b92915050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561080c57600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166362441aee83604051827c010000000000000000000000000000000000000000000000000000000002815260040180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156107d85780820380516001836020036101000a031916815260200191505b50925050506020604051808303816000876161da5a03f1156100025750505060405180519060200150905061081256610811565b610002565b5b919050565b60006000600050549050610826565b90565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561089857816000600050819055506001905061089e5661089d565b610002565b5b919050565b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166338cc4831604051817c01000000000000000000000000000000000000000000000000000000000281526004018090506020604051808303816000876161da5a03f11561000257505050604051805190602001509050610939565b9056';

exports.createContract = function(actionManagerAddress, callback) {
	exports.contract.new(actionManagerAddress,
		{
			from: web3.eth.defaultAccount, 
			data: data,
			gas: 3000000
		}, function(e, minedContract){
			if (minedContract && typeof minedContract.address != 'undefined') {
				//console.log('Contract mined! address: ' + minedContract.address + ' transactionHash: ' + minedContract.transactionHash);
				if(callback) callback(minedContract);
			} else if(e) {
				console.log("Contract Error");
				console.log(e);
			}
		}
	)
}